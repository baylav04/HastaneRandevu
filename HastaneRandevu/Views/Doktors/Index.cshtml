@model HastaneRandevu.Models.DoktorListViewModel

@{
    ViewData["Title"] = "Doktorlar";
    Layout = User.IsInRole("Admin") ? "_AdminLayout" : "_Layout";
}

<style>
    .header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

        .header-row h1 {
            font-size: 28px;
            font-weight: bold;
            margin: 0;
        }

    .btn-create {
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

        .btn-create:hover {
            background-color: #0056b3;
        }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 16px;
        font-family: 'Segoe UI', sans-serif;
        background-color: #ffffff;
    }

    thead {
        background-color: #e9ecef;
        font-weight: bold;
    }

    th, td {
        padding: 12px 16px;
        border-bottom: 1px solid #dee2e6;
        text-align: left;
        vertical-align: middle;
    }

    tr:nth-child(even) {
        background-color: #f8f9fa;
    }

    form.mb-3.d-flex.gap-2.align-items-center {
        margin-bottom: 30px;
    }

    .form-select, .form-control {
        min-width: 200px;
    }

    button.btn-primary {
        height: 38px;
    }

    .doktor-foto {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 50%;
        border: 1px solid #ccc;
    }

    .btn-sm {
        margin-right: 5px;
    }
</style>

<!-- Başlık ve Buton -->
<div class="header-row">
    <h1>@ViewData["Title"]</h1>

    @if (User.IsInRole("Admin"))
    {
        <a asp-action="Create" class="btn-create">Yeni Doktor Ekle</a>
    }
</div>

<!-- Filtreleme Formu -->
<form method="get" class="mb-3 d-flex gap-2 align-items-center">
    <select name="brans" class="form-select w-auto" onchange="this.form.submit()">
        <option value="">Branş Seçin</option>
        @foreach (var brans in Model.Branslar)
        {
            if (brans == Model.SeciliBrans)
            {
                <option value="@brans" selected>@brans</option>
            }
            else
            {
                <option value="@brans">@brans</option>
            }
        }
    </select>

    <input type="text" name="arama" class="form-control w-auto" placeholder="Doktor Ara" value="@Model.Arama" />
    <button type="submit" class="btn btn-primary">Ara</button>
</form>

<!-- Doktorlar Tablosu -->
<table class="table">
    <thead>
        <tr>
            <th>Fotoğraf</th>
            <th>Ad</th>
            <th>Poliklinik</th>
            @if (User.IsInRole("Admin"))
            {
                <th>İşlemler</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var doktor in Model.Doktorlar)
        {
            <tr>
                <td>
                    @if (!string.IsNullOrEmpty(doktor.FotoUrl))
                    {
                        <img src="@Url.Content("~/images/doktorlar/" + doktor.FotoUrl)" class="doktor-foto" alt="@doktor.Ad" />
                    }
                    else
                    {
                        <img src="~/images/doktorlar/@doktor.FotoUrl" class="doktor-foto" alt="Fotoğraf" />
                    }
                </td>
                <td>@doktor.Ad</td>
                <td>@doktor.Poliklinik?.PoliklinikAdi</td>
                @if (User.IsInRole("Admin"))
                {
                    <td>
                        <a asp-action="Edit" asp-route-id="@doktor.Id" class="btn btn-sm btn-warning">Düzenle</a>


                       
                    </td>
                }
            </tr>
        }
    </tbody>
    <style>
        .doktor-foto {
            width: 150px; /* Genişlik */
            height: 200px; /* Yükseklik */
            object-fit: cover; /* Fotoğrafı düzgün kes */
            border-radius: 0; /* Düz köşeler */
            display: block;
            margin-bottom: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1); /* Hafif gölge (isteğe bağlı) */
        }
    </style>
</table>
